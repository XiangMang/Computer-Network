网络核心: 因特网端系统的分组交换机和链路构成的网状结构.

### 1.3.1 分组交换
1. 在某种网络应用中, 端系统彼此交换 **报文(message)**. 报文能够包含该应用的设计者需要的任何东西. 报文可以执行一种控制功能, 也可以包含数据.
2. 为了从源端系统向目的端系统发送一个报文, 源将长报文划分为较小的数据块, 称为 **[[1.1 什么是Internet#^packet|分组(packet)]]** .
3. 在源和目的地之间, 每个分组都通过通信链路和 **分组交换机(packet switch)** 传送, 交换机主要有 **路由器(router)** 和 **链路层交换机(link-layer switch)** 两类. 分组以等于该链路*最大*传输速率的速度通过通信链路. 因此, 如果某源端系统或分组交换机经过一条链路发送一个 $L$ bit的分组, 链路的传输速率为 $R$ bps, 则传输给分组的时间为 $L/R$ s.

#### 1. 存储转发输送
多数分组交换机在链路的输入端使用 **存储转发传输(store-and-forward transmission)** 机制. 其是指在交换机开始向传输链路传输该分组的第一个比特之前, 必须接收到整个分组.

>以两个端系统经一台路由器连接构成的简单网路为例(忽略传播时延)
![[网络核心配图_1.png]]

在某个特定的时刻, 源已经传输了分组1的一部分. 因为该路由器应用了存储转发机制, 所以此时必须先缓存(即"存储")该分组的比特.仅当路由器已经接收完该组分组的*所有*比特后, 他才能开始向出链路传输(即"转发")该分组.

1. 源在时刻 $0$ 开始传输, 在时刻 $L/R$, 源传输了整个分组, 并且整个分组已被接收, 存储在路由器中.
2. 在时刻 $L/R$, 路由器刚好接收到整个分组, 并朝着目的地向出链路传输分组.
3. 在时刻 $2L/R$, 路由器传输完了整个分组, 且整个分组以被目的地接收.
   - 总延时为 $2L/R$. (而如果不使用存储转发输送机制, 其总延时为 $L/R$.)

以此类推, 在时刻 $4L/R$, 目的地已经收到所有三个分组!
由此, 我们可以得出一条一般性的规律: 通过 $N$ 条速率均为 $R$ 的链路组成的路径(所以, 在源和目的地之间有 $N-1$ 台路由器), 从源目的地发送一个分组, 其端到端的时延为:
$$
d_{end-end}=N \frac{L}{R}
$$
#### 2. 排队时延和分组丢失
$$
1-\sum_{n=0}^9 \binom{35}{n}p^n(1-p)^{35-n}
$$